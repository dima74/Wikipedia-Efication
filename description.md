* бэкенд генерирует замены по викитексту
* фронтенд находит замены по html
* предлагается отдать всю фильтрацию замен на фронтенд
* это будет работать, если все слова из викитекста будут в каком-то виде встречаться в html


Слова из викитекста, не встречающиеся в html (в виде TextNode):
* [x] комментарии
* [x] ссылки вида `[[link|name]]`, потому что в html встречается только `name`
* [x] Скрытые блоки `{{Начало скрытого блока}} ... {{Конец скрытого блока}}`
* [ ] имена файлов

Итак, 
* на бэкенде фильтруем только комментарии
* на фронтенде фильтруем всё остальное, то есть:
  * цитаты (тег `blockquote`)
  * Секции `литература`, `источники`, `ссылки` и другие
  * содержание (`#toc`)



Описания в файлах игнорируются, но они видны! Что делать?
[[Файл:Ant Nebula.jpg|мини|Планетарная туманность Муравья — Mz3. Выброс газа из умирающей центральной звезды симметричен, в отличие от хаотических выбросов обычных взрывов]]